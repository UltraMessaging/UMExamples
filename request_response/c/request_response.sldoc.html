<html>
  <head>
    <link rel="stylesheet" href="../../style/main.css" type="text/css" media="screen" />
    <title>Request-Response Sample Application</title>
  </head>
  <body>
    <a href="../../index.html" class="button" target="_top">Example index</a>
    <h1>Request-Response Sample Application</h1>
    <p>Ultra Messaging offers a Request/Response messaging model. A regular UM source can use a dedicated API to send a request
	on its publishing topic. A receiver for that topic will receive the request similar to regular data messages, and can use
	a dedicated API to send a response back to the source.</p>
    <p>When a request message is sent, the message is published on the same transport that the source is configured to use. 
     	Response messages on the other hand are sent directly to the source from the receiver via Unicast Immediate Messaging (UIM),
	which is a direct TCP connection.</p>
    <p>An important aspect of UM's Request/Response model is that it allows the application to keep track of which request 
	corresponds to a given response. Due to the asynchronous nature of UM requests, any number of requests can be outstanding, 
	and as the responses come in, they can be matched to their corresponding requests.</p>
    <p>There is one program source file:</p>
    <ul>
      <li><b><tt><a href="request_response.c">request_response.c</a></tt></b>
        - (right-click and save as "request_response.c") main program.</li>
    </ul>
    <h2>Program explanation: <tt>request_response.c</tt></h2>
    <h4>Includes</h4>
        <p>A small effort was made to provide a some portability between Unix and Windows. For example:</p>
        <a name="includes_ref_1" id="includes_ref_1"></a>
<small><pre>
<a href="request_response_c.slsrc.html#includes" target="src">00003</a>  #include &lt;stdio.h&gt;
<a href="request_response_c.slsrc.html#includes" target="src">00004</a>  
<a href="request_response_c.slsrc.html#includes" target="src">00005</a>  #if defined(_MSC_VER)
<a href="request_response_c.slsrc.html#includes" target="src">00006</a>  /* Windows-only includes */
<a href="request_response_c.slsrc.html#includes" target="src">00007</a>  #include &lt;winsock2.h&gt;
<a href="request_response_c.slsrc.html#includes" target="src">00008</a>  #define SLEEP(s) Sleep((s)*1000)
<a href="request_response_c.slsrc.html#includes" target="src">00009</a>  #else
<a href="request_response_c.slsrc.html#includes" target="src">00010</a>  /* Unix-only includes */
<a href="request_response_c.slsrc.html#includes" target="src">00011</a>  #include &lt;stdlib.h&gt;
<a href="request_response_c.slsrc.html#includes" target="src">00012</a>  #include &lt;unistd.h&gt;
<a href="request_response_c.slsrc.html#includes" target="src">00013</a>  #define SLEEP(s) sleep(s)
<a href="request_response_c.slsrc.html#includes" target="src">00014</a>  #endif
<a href="request_response_c.slsrc.html#includes" target="src">00015</a>  
<a href="request_response_c.slsrc.html#includes" target="src">00016</a>  #include &lt;lbm/lbm.h&gt;
</pre><!-- endblock includes_ref_1 --></small>


	<p>Different sets of header files should be included for Unix v.s. Windows applications. Also, whereas Unix has a simple function 
	sleep() which puts the caller to sleep for the specified number of seconds, Windows has no such function. It does, however, have 
	Sleep(), which sleeps for the specified number of milliseconds. To provide portability within the exmaple code, the macro SLEEP() 
	is defined appropriately to have the same behavior between Unix and Windows.</p>
  </body>
</html>

