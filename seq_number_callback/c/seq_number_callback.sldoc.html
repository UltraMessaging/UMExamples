<html>
  <head>
    <link rel="stylesheet" href="../../style/main.css" type="text/css" media="screen" />
    <title>UMP Receiver Sequence Number Info Callback</title>
  </head>
  <body>
    <a href="../../index.html" class="button" target="_top">Example index</a>
    <h1>UMP Receiver Sequence Number Info Callback</h1>
    <p>UMP receivers, by default will recover messages from the store based on its configured attribute for
    <a href="#" title="The behavior that the receiver will follow when determining the consensus sequence number used as the sequence number to begin reception at upon re-registration after a failure or suspension. This setting is only used when quorum-consensus is also used on the source.

Scope:	receiver
Type:	int
When to Set:	Can only be set during object initialization.
String value	Integer value	Description
lowest	LBM_RCV_TOPIC_ATTR_UME_QC_SQN_BEHAVIOR_LOWEST	Consensus is determined as the lowest of the latest sequence numbers seen from any store.
majority	LBM_RCV_TOPIC_ATTR_UME_QC_SQN_BEHAVIOR_MAJORITY	Consensus is determined as the latest sequence number agreed upon by the majority of stores within a group. Between groups, the latest of all majority decisions is used. Default for all.
highest	LBM_RCV_TOPIC_ATTR_UME_QC_SQN_BEHAVIOR_HIGHEST	Consensus is determined as the highest of the latest sequence numbers seen from any store.
" style="color:2222ee;border-bottom:1px dotted #2222ee;text-decoration: none;">ume_consensus_sequence_number_behavior</a>
.
    By default, this is configured to "majority". Consensus is based on all the sequence numbers provided to the receiver
    during store registration events (registration success events indicate a successful registration with a sinle store). Once 
    enough stores have registered to satisy a quorum, registration can complete. The sequence number provided in the registration
    complete callback event indicates the starting sequence number for the source (the consensus sequence number).</p>
    <p>UMP receivers have the ability to alter the starting sequence number by registering the receiver sequence number info
    callback function, configured programatically with 
    <a href="#" title="Callback function (and associated client data pointer) that is called when a receiver is about to complete registration from the stores in use by the source and the low sequence number is to be determined. The application has the ability to modify the sequence number to use if it desires. This callback is called directly in line and does not use the event queue. Therefore the callback function used should not block or it will block the context thread processing. A value of NULL for the callback turns off the callback being called.

Scope:	receiver
Type:	lbm_ume_rcv_recovery_info_ex_func_t
Default value:	NULL
When to Set:	Can only be set during object initialization.
Config File:	Cannot be set from an UM configuration file.
" style="color:2222ee;border-bottom:1px dotted #2222ee;text-decoration: none;">ume_recovery_sequence_number_info_function</a>
.
    This callback function will be executed by the UM library immediately prior to registration complete, and it provides sequence
    number data to the application so that the application can change the starting sequence number if desired. The specific data 
    provided by the callback includes:
    <ul>
      <li>low sequence number: The starting sequence number for the receiver. Can be overwritten by the application</li>
      <li>high sequence number: The highest sequence number available for recovery from the stores</li>
      <li>low retransmission sequence number: The sequence number determined by consensus, with the attribute 
    	<a href="#" title="The maximum number of messages to request, counting backward from the current latest message, when late-joining a topic. Due to network timing factors, UM may transmit an additional message. For example, a value of 5 sends 5 or possibly 6 retransmit messages to the new receiver. (Hence, you cannot request and be guaranteed to receive only 1 last message--you may get 2.) A value of 0 indicates no maximum.

Scope:	receiver
Type:	lbm_ulong_t
Units:	messages
Default value:	0
When to Set:	Can only be set during object initialization.
" style="color:2222ee;border-bottom:1px dotted #2222ee;text-decoration: none;">retransmit_request_maximum</a>
 taken into account</li>
    </ul></p>
    <p>It is highly recommended every UMP application use this function, at the very least for logging purposes. It is generally a 
    good idea to use this callback and check with internal application logic that the receiver is starting at the correct sequence
    number as well, to avoid the possibility of requesting retransmission for messages that may have already been consumed by a UMP
    receiver.</p>
    <p>There is one program source file:</p>
    <ul>
      <li><b><tt><a href="seq_number_callback.c">seq_number_callback.c</a></tt></b>
        - (right-click and save as "seq_number_callback.c") main program.</li>
    </ul>
    <h2>Program explanation: <tt>seq_number_callback.c</tt></h2>
    <h4>{Insert Block Section Title}</h4>
        <p>{Insert block section description}</p>
        
    {repeat blocks until end of file}
  </body>
</html>

