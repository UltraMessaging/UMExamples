<!DOCTYPE html><html><head><title>UMPReceiverCallbacks.cs</title>
<link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
<script src="//code.jquery.com/jquery-1.10.2.js"></script>
<script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/highlight.min.js"></script>
<script>
  $(function() {
    $( document ).tooltip();
  });
</script>
<style>
#code {background-color:#ffffff;};
</style>
</head>
<body><h1>UMPReceiverCallbacks.cs</h1>
<script>hljs.initHighlightingOnLoad();</script>
<small><pre><code id="code"><table border=0 cellpadding=0 cellspacing=0><tr>
<td>00001
00002
00003
00004
00005
00006
00007
00008
00009
00010
00011
00012
00013
00014
00015
00016
<a href="ump_receiver_callbacks.sldoc.html#ctx_rcv_create_ref_1" target="doc">00017</a>
<a href="ump_receiver_callbacks.sldoc.html#ctx_rcv_create_ref_1" target="doc">00018</a>
<a href="ump_receiver_callbacks.sldoc.html#ctx_rcv_create_ref_1" target="doc">00019</a>
<a href="ump_receiver_callbacks.sldoc.html#ctx_rcv_create_ref_1" target="doc">00020</a>
<a href="ump_receiver_callbacks.sldoc.html#ctx_rcv_create_ref_1" target="doc">00021</a>
<a href="ump_receiver_callbacks.sldoc.html#ctx_rcv_create_ref_1" target="doc">00022</a>
<a href="ump_receiver_callbacks.sldoc.html#ctx_rcv_create_ref_1" target="doc">00023</a>
00024
00025
00026
00027
00028
00029
00030
00031
00032
00033
00034
00035
<a href="ump_receiver_callbacks.sldoc.html#data_ref_1" target="doc">00036</a>
<a href="ump_receiver_callbacks.sldoc.html#data_ref_1" target="doc">00037</a>
<a href="ump_receiver_callbacks.sldoc.html#data_ref_1" target="doc">00038</a>
<a href="ump_receiver_callbacks.sldoc.html#data_ref_1" target="doc">00039</a>
<a href="ump_receiver_callbacks.sldoc.html#data_ref_1" target="doc">00040</a>
<a href="ump_receiver_callbacks.sldoc.html#data_ref_1" target="doc">00041</a>
<a href="ump_receiver_callbacks.sldoc.html#data_ref_1" target="doc">00042</a>
<a href="ump_receiver_callbacks.sldoc.html#data_ref_1" target="doc">00043</a>
<a href="ump_receiver_callbacks.sldoc.html#data_ref_1" target="doc">00044</a>
<a href="ump_receiver_callbacks.sldoc.html#data_ref_1" target="doc">00045</a>
<a href="ump_receiver_callbacks.sldoc.html#data_ref_1" target="doc">00046</a>
<a href="ump_receiver_callbacks.sldoc.html#request_ref_1" target="doc">00047</a>
<a href="ump_receiver_callbacks.sldoc.html#request_ref_1" target="doc">00048</a>
<a href="ump_receiver_callbacks.sldoc.html#request_ref_1" target="doc">00049</a>
<a href="ump_receiver_callbacks.sldoc.html#request_ref_1" target="doc">00050</a>
<a href="ump_receiver_callbacks.sldoc.html#request_ref_1" target="doc">00051</a>
<a href="ump_receiver_callbacks.sldoc.html#request_ref_1" target="doc">00052</a>
<a href="ump_receiver_callbacks.sldoc.html#request_ref_1" target="doc">00053</a>
<a href="ump_receiver_callbacks.sldoc.html#request_ref_1" target="doc">00054</a>
<a href="ump_receiver_callbacks.sldoc.html#request_ref_1" target="doc">00055</a>
<a href="ump_receiver_callbacks.sldoc.html#request_ref_1" target="doc">00056</a>
<a href="ump_receiver_callbacks.sldoc.html#bos_ref_1" target="doc">00057</a>
<a href="ump_receiver_callbacks.sldoc.html#bos_ref_1" target="doc">00058</a>
<a href="ump_receiver_callbacks.sldoc.html#bos_ref_1" target="doc">00059</a>
<a href="ump_receiver_callbacks.sldoc.html#eos_ref_1" target="doc">00060</a>
<a href="ump_receiver_callbacks.sldoc.html#eos_ref_1" target="doc">00061</a>
<a href="ump_receiver_callbacks.sldoc.html#eos_ref_1" target="doc">00062</a>
<a href="ump_receiver_callbacks.sldoc.html#loss_ref_1" target="doc">00063</a>
<a href="ump_receiver_callbacks.sldoc.html#loss_ref_1" target="doc">00064</a>
<a href="ump_receiver_callbacks.sldoc.html#loss_ref_1" target="doc">00065</a>
<a href="ump_receiver_callbacks.sldoc.html#burst_ref_1" target="doc">00066</a>
<a href="ump_receiver_callbacks.sldoc.html#burst_ref_1" target="doc">00067</a>
<a href="ump_receiver_callbacks.sldoc.html#burst_ref_1" target="doc">00068</a>
<a href="ump_receiver_callbacks.sldoc.html#no_source_ref_1" target="doc">00069</a>
<a href="ump_receiver_callbacks.sldoc.html#reg_error_ref_1" target="doc">00070</a>
<a href="ump_receiver_callbacks.sldoc.html#reg_error_ref_1" target="doc">00071</a>
<a href="ump_receiver_callbacks.sldoc.html#reg_error_ref_1" target="doc">00072</a>
<a href="ump_receiver_callbacks.sldoc.html#reg_success_ref_1" target="doc">00073</a>
<a href="ump_receiver_callbacks.sldoc.html#reg_success_ref_1" target="doc">00074</a>
<a href="ump_receiver_callbacks.sldoc.html#reg_success_ref_1" target="doc">00075</a>
<a href="ump_receiver_callbacks.sldoc.html#reg_success_ref_1" target="doc">00076</a>
<a href="ump_receiver_callbacks.sldoc.html#reg_success_ref_1" target="doc">00077</a>
<a href="ump_receiver_callbacks.sldoc.html#reg_complete_ref_1" target="doc">00078</a>
<a href="ump_receiver_callbacks.sldoc.html#reg_complete_ref_1" target="doc">00079</a>
<a href="ump_receiver_callbacks.sldoc.html#reg_complete_ref_1" target="doc">00080</a>
<a href="ump_receiver_callbacks.sldoc.html#reg_complete_ref_1" target="doc">00081</a>
<a href="ump_receiver_callbacks.sldoc.html#reg_complete_ref_1" target="doc">00082</a>
<a href="ump_receiver_callbacks.sldoc.html#dereg_success_ref_1" target="doc">00083</a>
<a href="ump_receiver_callbacks.sldoc.html#dereg_success_ref_1" target="doc">00084</a>
<a href="ump_receiver_callbacks.sldoc.html#dereg_success_ref_1" target="doc">00085</a>
<a href="ump_receiver_callbacks.sldoc.html#dereg_success_ref_1" target="doc">00086</a>
<a href="ump_receiver_callbacks.sldoc.html#dereg_success_ref_1" target="doc">00087</a>
<a href="ump_receiver_callbacks.sldoc.html#dereg_success_ref_1" target="doc">00088</a>
<a href="ump_receiver_callbacks.sldoc.html#dereg_success_ref_1" target="doc">00089</a>
<a href="ump_receiver_callbacks.sldoc.html#dereg_success_ref_1" target="doc">00090</a>
<a href="ump_receiver_callbacks.sldoc.html#dereg_complete_ref_1" target="doc">00091</a>
<a href="ump_receiver_callbacks.sldoc.html#dereg_complete_ref_1" target="doc">00092</a>
<a href="ump_receiver_callbacks.sldoc.html#dereg_complete_ref_1" target="doc">00093</a>
<a href="ump_receiver_callbacks.sldoc.html#reg_change_ref_1" target="doc">00094</a>
<a href="ump_receiver_callbacks.sldoc.html#reg_change_ref_1" target="doc">00095</a>
<a href="ump_receiver_callbacks.sldoc.html#reg_change_ref_1" target="doc">00096</a>
<a href="ump_receiver_callbacks.sldoc.html#other_ref_1" target="doc">00097</a>
<a href="ump_receiver_callbacks.sldoc.html#other_ref_1" target="doc">00098</a>
<a href="ump_receiver_callbacks.sldoc.html#other_ref_1" target="doc">00099</a>
00100
00101
00102
00103
</td><td>  /* UMPReceiverCallbacks.cs, see http://ultramessaging.github.io/UMExamples/ump_receiver_callbacks/dotnet/ */
  
  using System;
  using System.Collections.Generic;
  using System.Linq;
  using System.Text;
  using System.Threading.Tasks;
  using com.latencybusters.lbm;
  
  public class UMPReceiverCallbacks {
          static void Main(String[] args) {
                  LBMContext ctx = null;           /* Context object: container for UM "instance". */
                  LBMReceiver rcv = null;          /* Receiver object: for receiving messages. */
                  LBMTopic rtopic = null;          /* Topic object */
  
                  /* Initialize and create receiver and receiver callback */
<span name="ctx_rcv_create" id="ctx_rcv_create"></span>                  LBMReceiverCallback myReceiverCallback = new LBMReceiverCallback(onReceive);
  
                  /*** Initialization: create necessary UM objects. ***/
                  ctx = new LBMContext();
  
                  rtopic = new LBMTopic(ctx, "test.topic");
                  rcv = new LBMReceiver(ctx, rtopic, myReceiverCallback, null);
  
                  while(true)
                  {
  
                  }
          } /* main */
  
          /* Class for receiving messages */
          static int onReceive(Object cbArg, LBMMessage msg)
          {
                  switch (msg.type())
                  {
<span name="data" id="data"></span>                          case LBM.MSG_DATA:
                                  System.Console.Out.Write("[" + msg.topicName() + "][" + msg.source() + "][" + msg.sequenceNumber() + "]");
                                  if ((msg.flags() &amp; LBM.MSG_FLAG_UME_RETRANSMIT) != 0) {
                                          System.Console.Out.Write("-RX-");
                                  }
                                  if ((msg.flags() &amp; LBM.MSG_FLAG_OTR) != 0) {
                                          System.Console.Out.Write("-OTR-");
                                  }
                                  System.Console.Out.Write(", ");
                                  System.Console.Out.WriteLine(msg.data().Length + " bytes");
                                  break;
<span name="request" id="request"></span>                          case LBM.MSG_REQUEST:
                                  if ((msg.flags() &amp; LBM.MSG_FLAG_UME_RETRANSMIT) != 0) {
                                          System.Console.Out.Write("-RX-");
                                  }
                                  if ((msg.flags() &amp; LBM.MSG_FLAG_OTR) != 0) {
                                          System.Console.Out.Write("-OTR-");
                                  }
                                  System.Console.Out.Write(", ");
                                  System.Console.Out.WriteLine(msg.data().Length + " bytes");
                                  break;
<span name="bos" id="bos"></span>                          case LBM.MSG_BOS:
                                  System.Console.Out.WriteLine("[" + msg.topicName() + "][" + msg.source() + "], Beginning of Transport Session");
                                  break;
<span name="eos" id="eos"></span>                          case LBM.MSG_EOS:
                                  System.Console.Out.WriteLine("[" + msg.topicName() + "][" + msg.source() + "], End of Transport Session");
                                  break;
<span name="loss" id="loss"></span>                          case LBM.MSG_UNRECOVERABLE_LOSS:
                                  System.Console.Out.WriteLine("[" + msg.topicName() + "][" + msg.source() + "][" + msg.sequenceNumber().ToString("x") + "], LOST");
                                  break;
<span name="burst" id="burst"></span>                          case LBM.MSG_UNRECOVERABLE_LOSS_BURST:
                                  System.Console.Out.WriteLine("[" + msg.topicName() + "][" + msg.source() + "][" + msg.sequenceNumber().ToString("x") + "], LOST BURST");
                                  break;
<span name="no_source" id="no_source"></span>  
<span name="reg_error" id="reg_error"></span>                          case LBM.MSG_UME_REGISTRATION_ERROR:
                                  System.Console.Out.WriteLine("[" + msg.topicName() + "][" + msg.source() + "] UME registration error: " + msg.dataString());
                                  break;
<span name="reg_success" id="reg_success"></span>                          case LBM.MSG_UME_REGISTRATION_SUCCESS_EX:
                                  UMERegistrationSuccessInfo reg = msg.registrationSuccessInfo();
                                  System.Console.Out.WriteLine("[" + msg.topicName() + "][" + msg.source() + "] store " + reg.storeIndex() + ": "
                                          + reg.store() + " UME registration successful. Sequence number is " + reg.sequenceNumber());
                                  break;
<span name="reg_complete" id="reg_complete"></span>                          case LBM.MSG_UME_REGISTRATION_COMPLETE_EX:
                                  UMERegistrationCompleteInfo regcomplete = msg.registrationCompleteInfo();
                                  System.Console.Out.WriteLine("[" + msg.topicName() + "][" + msg.source() + "] UME registration complete. SQN "
                                          + regcomplete.sequenceNumber() + ". Flags " + regcomplete.flags());
                                  break;
<span name="dereg_success" id="dereg_success"></span>                          case LBM.MSG_UME_DEREGISTRATION_SUCCESS_EX:
                                  System.Console.Out.Write("DEREGISTRATION SUCCESSFUL ");
                                  UMEDeregistrationSuccessInfo dereg = msg.deregistrationSuccessInfo();
                                  System.Console.Out.Write("[" + msg.topicName() + "][" + msg.source() + "] store " + dereg.storeIndex() + ": "
                                          + dereg.store() + " UME deregistration successful. SrcRegID " + dereg.sourceRegistrationId() + " RcvRegID " + dereg.receiverRegistrationId()
                                          + ". Flags " + dereg.flags() + " ");
                                  System.Console.Out.WriteLine();
                                  break;
<span name="dereg_complete" id="dereg_complete"></span>                          case LBM.MSG_UME_DEREGISTRATION_COMPLETE_EX:
                                  System.Console.Out.WriteLine("DEREGISTRATION COMPLETE");
                                  break;
<span name="reg_change" id="reg_change"></span>                          case LBM.MSG_UME_REGISTRATION_CHANGE:
                                  System.Console.Out.WriteLine("[" + msg.topicName() + "][" + msg.source() + "] UME registration change: " + msg.dataString());
                                  break;
<span name="other" id="other"></span>                          default:
                                  System.Console.Out.WriteLine("Other event, type=" + msg.type());
                                  break;
                  }
                  return 0;
          }
  } /* class UMPReceiverCallbacks */
</td></tr></table></code>




















































































</pre></small></body></html>
