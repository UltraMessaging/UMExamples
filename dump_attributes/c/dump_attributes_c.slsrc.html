<!DOCTYPE html><html><head><title>dump_attributes.c</title>
<link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
<script src="//code.jquery.com/jquery-1.10.2.js"></script>
<script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/highlight.min.js"></script>
<script>
  $(function() {
    $( document ).tooltip();
  });
</script>
<style>
#code {background-color:#ffffff;};
</style>
</head>
<body><h1>dump_attributes.c</h1>
<script>hljs.initHighlightingOnLoad();</script>
<small><pre><code id="code"><table border=0 cellpadding=0 cellspacing=0><tr>
<td>00001
00002
00003
00004
00005
00006
00007
00008
00009
00010
00011
00012
00013
00014
00015
00016
00017
00018
00019
00020
00021
00022
00023
00024
00025
00026
00027
00028
00029
00030
00031
00032
00033
00034
00035
00036
00037
00038
00039
00040
00041
00042
00043
00044
00045
00046
00047
00048
00049
00050
00051
00052
00053
00054
00055
00056
00057
00058
00059
00060
00061
00062
00063
00064
00065
00066
00067
00068
00069
00070
00071
00072
00073
00074
00075
00076
00077
00078
<a href="dump_attributes.sldoc.html#src_create_ref_1" target="doc">00079</a>
<a href="dump_attributes.sldoc.html#src_create_ref_1" target="doc">00080</a>
<a href="dump_attributes.sldoc.html#src_create_ref_1" target="doc">00081</a>
<a href="dump_attributes.sldoc.html#src_create_ref_1" target="doc">00082</a>
<a href="dump_attributes.sldoc.html#src_create_ref_1" target="doc">00083</a>
<a href="dump_attributes.sldoc.html#src_create_ref_1" target="doc">00084</a>
<a href="dump_attributes.sldoc.html#src_create_ref_1" target="doc">00085</a>
<a href="dump_attributes.sldoc.html#src_create_ref_1" target="doc">00086</a>
<a href="dump_attributes.sldoc.html#src_create_ref_1" target="doc">00087</a>
<a href="dump_attributes.sldoc.html#src_create_ref_1" target="doc">00088</a>
<a href="dump_attributes.sldoc.html#src_create_ref_1" target="doc">00089</a>
<a href="dump_attributes.sldoc.html#src_create_ref_1" target="doc">00090</a>
<a href="dump_attributes.sldoc.html#src_create_ref_1" target="doc">00091</a>
<a href="dump_attributes.sldoc.html#src_create_ref_1" target="doc">00092</a>
<a href="dump_attributes.sldoc.html#src_create_ref_1" target="doc">00093</a>
<a href="dump_attributes.sldoc.html#src_create_ref_1" target="doc">00094</a>
<a href="dump_attributes.sldoc.html#src_create_ref_1" target="doc">00095</a>
<a href="dump_attributes.sldoc.html#src_create_ref_1" target="doc">00096</a>
<a href="dump_attributes.sldoc.html#src_create_ref_1" target="doc">00097</a>
<a href="dump_attributes.sldoc.html#src_create_ref_1" target="doc">00098</a>
<a href="dump_attributes.sldoc.html#src_create_ref_1" target="doc">00099</a>
<a href="dump_attributes.sldoc.html#src_create_ref_1" target="doc">00100</a>
<a href="dump_attributes.sldoc.html#src_create_ref_1" target="doc">00101</a>
<a href="dump_attributes.sldoc.html#src_create_ref_1" target="doc">00102</a>
<a href="dump_attributes.sldoc.html#src_create_ref_1" target="doc">00103</a>
<a href="dump_attributes.sldoc.html#src_create_ref_1" target="doc">00104</a>
<a href="dump_attributes.sldoc.html#src_create_ref_1" target="doc">00105</a>
<a href="dump_attributes.sldoc.html#src_create_ref_1" target="doc">00106</a>
<a href="dump_attributes.sldoc.html#src_create_ref_1" target="doc">00107</a>
<a href="dump_attributes.sldoc.html#src_create_ref_1" target="doc">00108</a>
<a href="dump_attributes.sldoc.html#src_create_ref_1" target="doc">00109</a>
<a href="dump_attributes.sldoc.html#src_create_ref_1" target="doc">00110</a>
<a href="dump_attributes.sldoc.html#src_create_ref_1" target="doc">00111</a>
<a href="dump_attributes.sldoc.html#src_create_ref_1" target="doc">00112</a>
<a href="dump_attributes.sldoc.html#src_create_ref_1" target="doc">00113</a>
<a href="dump_attributes.sldoc.html#src_create_ref_1" target="doc">00114</a>
<a href="dump_attributes.sldoc.html#src_create_ref_1" target="doc">00115</a>
<a href="dump_attributes.sldoc.html#src_create2_ref_1" target="doc">00116</a>
<a href="dump_attributes.sldoc.html#src_create2_ref_1" target="doc">00117</a>
<a href="dump_attributes.sldoc.html#src_create2_ref_1" target="doc">00118</a>
<a href="dump_attributes.sldoc.html#src_create2_ref_1" target="doc">00119</a>
<a href="dump_attributes.sldoc.html#src_create2_ref_1" target="doc">00120</a>
<a href="dump_attributes.sldoc.html#src_create2_ref_1" target="doc">00121</a>
<a href="dump_attributes.sldoc.html#src_create2_ref_1" target="doc">00122</a>
<a href="dump_attributes.sldoc.html#src_create2_ref_1" target="doc">00123</a>
<a href="dump_attributes.sldoc.html#src_create2_ref_1" target="doc">00124</a>
<a href="dump_attributes.sldoc.html#src_create2_ref_1" target="doc">00125</a>
<a href="dump_attributes.sldoc.html#src_create2_ref_1" target="doc">00126</a>
<a href="dump_attributes.sldoc.html#src_create2_ref_1" target="doc">00127</a>
<a href="dump_attributes.sldoc.html#src_create2_ref_1" target="doc">00128</a>
<a href="dump_attributes.sldoc.html#src_create2_ref_1" target="doc">00129</a>
<a href="dump_attributes.sldoc.html#src_create2_ref_1" target="doc">00130</a>
<a href="dump_attributes.sldoc.html#src_create2_ref_1" target="doc">00131</a>
<a href="dump_attributes.sldoc.html#src_create2_ref_1" target="doc">00132</a>
<a href="dump_attributes.sldoc.html#src_create2_ref_1" target="doc">00133</a>
<a href="dump_attributes.sldoc.html#src_create2_ref_1" target="doc">00134</a>
<a href="dump_attributes.sldoc.html#src_create2_ref_1" target="doc">00135</a>
<a href="dump_attributes.sldoc.html#src_create2_ref_1" target="doc">00136</a>
<a href="dump_attributes.sldoc.html#src_create2_ref_1" target="doc">00137</a>
<a href="dump_attributes.sldoc.html#src_create2_ref_1" target="doc">00138</a>
<a href="dump_attributes.sldoc.html#src_create2_ref_1" target="doc">00139</a>
<a href="dump_attributes.sldoc.html#src_create2_ref_1" target="doc">00140</a>
<a href="dump_attributes.sldoc.html#src_create2_ref_1" target="doc">00141</a>
<a href="dump_attributes.sldoc.html#src_create2_ref_1" target="doc">00142</a>
<a href="dump_attributes.sldoc.html#src_create2_ref_1" target="doc">00143</a>
<a href="dump_attributes.sldoc.html#src_create2_ref_1" target="doc">00144</a>
<a href="dump_attributes.sldoc.html#src_create2_ref_1" target="doc">00145</a>
<a href="dump_attributes.sldoc.html#dump_ctx_attr_ref_1" target="doc">00146</a>
<a href="dump_attributes.sldoc.html#dump_ctx_attr_ref_1" target="doc">00147</a>
<a href="dump_attributes.sldoc.html#dump_ctx_attr_ref_1" target="doc">00148</a>
<a href="dump_attributes.sldoc.html#dump_ctx_attr_ref_1" target="doc">00149</a>
<a href="dump_attributes.sldoc.html#dump_ctx_attr_ref_1" target="doc">00150</a>
<a href="dump_attributes.sldoc.html#dump_ctx_attr_ref_1" target="doc">00151</a>
<a href="dump_attributes.sldoc.html#dump_ctx_attr_ref_1" target="doc">00152</a>
<a href="dump_attributes.sldoc.html#dump_ctx_attr_ref_1" target="doc">00153</a>
<a href="dump_attributes.sldoc.html#dump_ctx_attr_ref_1" target="doc">00154</a>
<a href="dump_attributes.sldoc.html#dump_ctx_attr_ref_1" target="doc">00155</a>
<a href="dump_attributes.sldoc.html#dump_ctx_attr_ref_1" target="doc">00156</a>
<a href="dump_attributes.sldoc.html#dump_ctx_attr_ref_1" target="doc">00157</a>
<a href="dump_attributes.sldoc.html#dump_ctx_attr_ref_1" target="doc">00158</a>
<a href="dump_attributes.sldoc.html#dump_ctx_attr_ref_1" target="doc">00159</a>
<a href="dump_attributes.sldoc.html#dump_ctx_attr_ref_1" target="doc">00160</a>
<a href="dump_attributes.sldoc.html#dump_ctx_attr_ref_1" target="doc">00161</a>
<a href="dump_attributes.sldoc.html#dump_ctx_attr_ref_1" target="doc">00162</a>
<a href="dump_attributes.sldoc.html#dump_ctx_attr_ref_1" target="doc">00163</a>
<a href="dump_attributes.sldoc.html#dump_ctx_attr_ref_1" target="doc">00164</a>
<a href="dump_attributes.sldoc.html#dump_ctx_attr_ref_1" target="doc">00165</a>
<a href="dump_attributes.sldoc.html#dump_src_attr_ref_1" target="doc">00166</a>
<a href="dump_attributes.sldoc.html#dump_src_attr_ref_1" target="doc">00167</a>
<a href="dump_attributes.sldoc.html#dump_src_attr_ref_1" target="doc">00168</a>
<a href="dump_attributes.sldoc.html#dump_src_attr_ref_1" target="doc">00169</a>
<a href="dump_attributes.sldoc.html#dump_src_attr_ref_1" target="doc">00170</a>
<a href="dump_attributes.sldoc.html#dump_src_attr_ref_1" target="doc">00171</a>
<a href="dump_attributes.sldoc.html#dump_src_attr_ref_1" target="doc">00172</a>
<a href="dump_attributes.sldoc.html#dump_src_attr_ref_1" target="doc">00173</a>
<a href="dump_attributes.sldoc.html#dump_src_attr_ref_1" target="doc">00174</a>
<a href="dump_attributes.sldoc.html#dump_src_attr_ref_1" target="doc">00175</a>
<a href="dump_attributes.sldoc.html#dump_src_attr_ref_1" target="doc">00176</a>
<a href="dump_attributes.sldoc.html#dump_src_attr_ref_1" target="doc">00177</a>
<a href="dump_attributes.sldoc.html#dump_src_attr_ref_1" target="doc">00178</a>
<a href="dump_attributes.sldoc.html#dump_src_attr_ref_1" target="doc">00179</a>
<a href="dump_attributes.sldoc.html#dump_src_attr_ref_1" target="doc">00180</a>
<a href="dump_attributes.sldoc.html#dump_src_attr_ref_1" target="doc">00181</a>
<a href="dump_attributes.sldoc.html#dump_src_attr_ref_1" target="doc">00182</a>
<a href="dump_attributes.sldoc.html#dump_src_attr_ref_1" target="doc">00183</a>
<a href="dump_attributes.sldoc.html#dump_src_attr_ref_1" target="doc">00184</a>
<a href="dump_attributes.sldoc.html#dump_src_attr_ref_1" target="doc">00185</a>
<a href="dump_attributes.sldoc.html#dump_src_attr2_ref_1" target="doc">00186</a>
<a href="dump_attributes.sldoc.html#dump_src_attr2_ref_1" target="doc">00187</a>
<a href="dump_attributes.sldoc.html#dump_src_attr2_ref_1" target="doc">00188</a>
<a href="dump_attributes.sldoc.html#dump_src_attr2_ref_1" target="doc">00189</a>
<a href="dump_attributes.sldoc.html#dump_src_attr2_ref_1" target="doc">00190</a>
<a href="dump_attributes.sldoc.html#dump_src_attr2_ref_1" target="doc">00191</a>
<a href="dump_attributes.sldoc.html#dump_src_attr2_ref_1" target="doc">00192</a>
<a href="dump_attributes.sldoc.html#dump_src_attr2_ref_1" target="doc">00193</a>
<a href="dump_attributes.sldoc.html#dump_src_attr2_ref_1" target="doc">00194</a>
<a href="dump_attributes.sldoc.html#dump_src_attr2_ref_1" target="doc">00195</a>
<a href="dump_attributes.sldoc.html#dump_src_attr2_ref_1" target="doc">00196</a>
<a href="dump_attributes.sldoc.html#dump_src_attr2_ref_1" target="doc">00197</a>
<a href="dump_attributes.sldoc.html#dump_src_attr2_ref_1" target="doc">00198</a>
<a href="dump_attributes.sldoc.html#dump_src_attr2_ref_1" target="doc">00199</a>
00200
00201
00202
00203
00204
00205
00206
00207
00208
00209
00210
00211
00212
00213
00214
</td><td>  /* Example on setting Ultra Messaging attributes */
  
  #include &lt;stdio.h&gt;
  
  #if defined(_MSC_VER)
  /* Windows-only includes */
  #include &lt;winsock2.h&gt;
  #define SLEEP(s) Sleep((s)*1000)
  #else
  /* Unix-only includes */
  #include &lt;stdlib.h&gt;
  #include &lt;unistd.h&gt;
  #define SLEEP(s) sleep(s)
  #endif
  
  #include &lt;lbm/lbm.h&gt;
  
  int main(int argc, char **argv)
  {
      lbm_context_t *ctx;                         /* pointer to context object */
      lbm_topic_t *topic_1;                       /* pointer to topic object */
      lbm_topic_t *topic_2;                       /* pointer to topic object */
      lbm_src_t *src_1;                           /* pointer to source object */
      lbm_src_t *src_2;                           /* pointer to source object */
      lbm_src_topic_attr_t *tattr_1;              /* pointer to source attribute object */
      lbm_src_topic_attr_t *tattr_2;              /* pointer to source attribute object */
      lbm_context_attr_t * cattr;                 /* pointer to context attribute object */
      lbm_config_option_t *configs_option_ptr;    /* pointer to configuration options returned from lib*/
      lbm_uint16_t res_port;                      /* Int to set resolver port */
      lbm_uint16_t des_port;                      /* Int to set lbtrm destination port */
      int err;                                    /* return status of lbm functions (true=error) */
      int entries;                                /* Int used to count number of config entries */
      int idx;                                    /* Int used to iterate across config entries */
  
  
  #if defined(_MSC_VER)
      /* windows-specific code */
      WSADATA wsadata;
      int wsStat = WSAStartup(MAKEWORD(2, 2), &amp;wsadata);
      if (wsStat != 0)
      {
          printf("line %d: wsStat=%d\n", __LINE__, wsStat);
          exit(1);
      }
  #endif
  
      /* Initialize the defaults for the context attribute object */
      if (lbm_context_attr_create(&amp;cattr) != 0)
      {
          fprintf(stderr, "lbm_context_attr_create: %s\n", lbm_errmsg());
          exit(1);
      }
  
      /* Setting the resolver address using the string method */
      if (lbm_context_attr_str_setopt(cattr, "resolver_multicast_address", "224.10.11.12") != 0)
      {
          fprintf(stderr, "lbm_context_attr_str_setopt:resolver_multicast_address: %s\n", lbm_errmsg());
          exit(1);
      }
  
      /* Setting the resolver port using the data-type value method */
      res_port = 12345;
      if (lbm_context_attr_setopt(cattr, "resolver_multicast_port", &amp;res_port, sizeof(lbm_uint16_t)) != 0)
      {
          fprintf(stderr, "lbm_context_attr_setopt:resolver_mutlicast_port: %s\n", lbm_errmsg());
          exit(1);
      }
  
      /* Creating the context */
      err = lbm_context_create(&amp;ctx, cattr, NULL, NULL);
      if (err)
      {
          printf("line %d: %s\n", __LINE__, lbm_errmsg());
          exit(1);
      }
  
      /* Delete the context attribute object */
      lbm_context_attr_delete(cattr);
<span name="src_create" id="src_create"></span>      /* Initializing the source attribute object */
      if (lbm_src_topic_attr_create(&amp;tattr_1) != 0)
      {
          fprintf(stderr, "lbm_src_topic_attr_create: %s\n", lbm_errmsg());
          exit(1);
      }
  
      /* Setting the transport via the source topic string method */
      if (lbm_src_topic_attr_str_setopt(tattr_1, "transport", "lbtrm") != 0)
      {
          fprintf(stderr, "lbm_src_topic_attr_str_setopt:transport: %s\n", lbm_errmsg());
          exit(1);
      }
  
      /* Setting the lbtrm destination port via the direct value set method */
      des_port = 14001;
      if (lbm_src_topic_attr_setopt(tattr_1, "transport_lbtrm_destination_port", &amp;des_port, sizeof(lbm_uint16_t)) != 0)
      {
          fprintf(stderr, "lbm_src_topic_attr_setopt:transport_lbtrm_destination_port: %s\n", lbm_errmsg());
          exit(1);
      }
  
      /* Allocating the topic */
      err = lbm_src_topic_alloc(&amp;topic_1, ctx, "test.topic.1", tattr_1);
      if (err)
      {
          printf("line %d: %s\n", __LINE__, lbm_errmsg());
          exit(1);
      }
  
      /* Creating the source */
      err = lbm_src_create(&amp;src_1, ctx, topic_1, NULL, NULL, NULL);
      if (err)
      {
          printf("line %d: %s\n", __LINE__, lbm_errmsg());
          exit(1);
      }
<span name="src_create2" id="src_create2"></span>      /* Initialized the second source attributes as a copy of the first */
      if (lbm_src_topic_attr_dup(&amp;tattr_2, tattr_1) != 0)
      {
          fprintf(stderr, "lbm_src_topic_attr_dup: %s\n", lbm_errmsg());
          exit(1);
      }
  
      /* Now modify the destination port for this second source to put the publisher on a different transport */
      des_port = 14002;
      if (lbm_src_topic_attr_setopt(tattr_2, "transport_lbtrm_destination_port", &amp;des_port, sizeof(lbm_uint16_t)) != 0)
      {
          fprintf(stderr, "lbm_src_topic_attr_setopt:transport_lbtrm_destination_port: %s\n", lbm_errmsg());
          exit(1);
      }
  
      /* Allocating the second topic */
      err = lbm_src_topic_alloc(&amp;topic_2, ctx, "test.topic.2", tattr_2);
      if (err)
      {
          printf("line %d: %s\n", __LINE__, lbm_errmsg());
          exit(1);
      }
  
      /* Creating the source */
      err = lbm_src_create(&amp;src_2, ctx, topic_2, NULL, NULL, NULL);
      if (err)
      {
          printf("line %d: %s\n", __LINE__, lbm_errmsg());
          exit(1);
      }
<span name="dump_ctx_attr" id="dump_ctx_attr"></span>      /* each lbm object (ctx, src, rcv)  has a different number of configuration     */
      /* attributes. To allocate the array, call the corresponding *_option_size      */
      /* function and allocate enough memory to contain the return strings        */
      entries = lbm_context_attr_option_size();
      configs_option_ptr = malloc(entries * sizeof(lbm_config_option_t));
  
      /* Get the attributes for the context */
      if (LBM_FAILURE == lbm_context_dump(ctx, &amp;entries, configs_option_ptr))
      {
          fprintf(stderr, "lbm_context_dump error: %s\n", lbm_errmsg());
          return;
      }
  
      /* iterate through the returned array and print each option */
      for (idx = 0; idx &lt; entries; ++idx) {
          printf("%s[%d]: %s = %s\n", configs_option_ptr[idx].type, idx, configs_option_ptr[idx].oname, configs_option_ptr[idx].val);
      }
  
      /* done with context attributes so free the allocated memory */
      free(configs_option_ptr);
<span name="dump_src_attr" id="dump_src_attr"></span>      /* each lbm object (ctx, src, rcv)  has a different number of configuration */
      /* options to allocate the array, call the corresponding *_option_size      */
      /* function and allocate enough memory to contain the return strings        */
      entries = lbm_src_topic_attr_option_size();
      configs_option_ptr = malloc(entries * sizeof(lbm_config_option_t));
  
      /* Get the attributes for the first source */
      if (LBM_FAILURE == lbm_src_topic_dump(src_1, &amp;entries, configs_option_ptr))
      {
          fprintf(stderr, "lbm_src_topic_dump error: %s\n", lbm_errmsg());
          return;
      }
  
      /* iterate through the returned array and print each option */
      for (idx = 0; idx &lt; entries; ++idx) {
          printf("%s[%d]: %s = %s\n", configs_option_ptr[idx].type, idx, configs_option_ptr[idx].oname, configs_option_ptr[idx].val);
      }
  
      /* note that configs_option_ptr can be reused for multiple sources without being freed. */
  
<span name="dump_src_attr2" id="dump_src_attr2"></span>      /* Get the attributes for the second source */
      if (LBM_FAILURE == lbm_src_topic_dump(src_2, &amp;entries, configs_option_ptr))
      {
          fprintf(stderr, "lbm_src_topic_dump error: %s\n", lbm_errmsg());
          return;
      }
  
      /* iterate through the returned array and print each option */
      for (idx = 0; idx &lt; entries; ++idx) {
          printf("%s[%d]: %s = %s\n", configs_option_ptr[idx].type, idx, configs_option_ptr[idx].oname, configs_option_ptr[idx].val);
      }
  
      /* done with source attributes so free the allocated memory */
      free(configs_option_ptr);
      /* Delete the first and second source topic attribute objects */
      lbm_src_topic_attr_delete(tattr_1);
      lbm_src_topic_attr_delete(tattr_2);
  
      /* Finished with all LBM functions, delete the source and context object. */
      lbm_src_delete(src_1);
      lbm_src_delete(src_2);
      lbm_context_delete(ctx);
  
  #if defined(_MSC_VER)
      WSACleanup();
  #endif
          return 0;
  }
  
</td></tr></table></code>




















































































</pre></small></body></html>
